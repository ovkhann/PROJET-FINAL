import{d as P,r as m,o as D,c as l,e,F as C,g as k,t as d,l as N,h as b,m as g,f as S,A as p,j as a,_ as v,n as E,p as y,q as F,s as L}from"./index-qhu-GOTb.js";const M={class:"products-admin"},T={class:"table-wrapper"},V={class:"products-table"},B={class:"images-cell"},I=["src"],U=["onClick"],q=["onClick"],G={class:"form-panel"},j={class:"form-buttons"},O={type:"submit"},z=P({__name:"ProductsAdmin",setup(_){const r=m([]),i=m({name:"",description:"",price:0,pictures:[]}),u=m(null);async function o(){try{const n=await p.get("/api/products");r.value=n.data.map(t=>({id:Number(t.id),name:String(t.name),description:String(t.description??""),price:Number(t.price),picture:t.picture??[]}))}catch(n){console.error("Erreur chargement produits",n)}}async function c(){try{const n=new FormData;n.append("name",i.value.name),n.append("description",i.value.description),n.append("price",i.value.price.toString()),i.value.pictures.forEach(t=>{n.append("pictures[]",t)}),u.value?await p.post(`/api/products/${u.value.id}?_method=PUT`,n,{headers:{"Content-Type":"multipart/form-data"}}):await p.post("/api/products",n,{headers:{"Content-Type":"multipart/form-data"}}),await o(),f()}catch(n){console.error("Erreur sauvegarde produit",n)}}async function w(n){if(confirm("Supprimer ce produit ?"))try{await p.delete(`/api/products/${n}`),await o()}catch(t){console.error("Erreur suppression produit",t)}}function x(n){u.value=n,i.value={name:n.name,description:n.description,price:n.price,pictures:[]}}function f(){u.value=null,i.value={name:"",description:"",price:0,pictures:[]}}return D(o),(n,t)=>(a(),l("div",M,[e("header",{class:"admin-header"},[t[4]||(t[4]=e("h2",null,"Gestion des Produits",-1)),e("button",{onClick:f,class:"btn-new"},"+ Nouveau Produit")]),e("div",T,[e("table",V,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Images"),e("th",null,"Nom"),e("th",null,"Description"),e("th",null,"Prix"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),l(C,null,k(r.value,s=>(a(),l("tr",{key:s.id},[e("td",null,d(s.id),1),e("td",B,[(a(!0),l(C,null,k(s.picture,(h,A)=>(a(),l("img",{key:A,src:h,alt:"Produit",class:"thumb"},null,8,I))),128))]),e("td",null,d(s.name),1),e("td",null,d(s.description),1),e("td",null,d(s.price.toFixed(2))+" €",1),e("td",null,[e("button",{onClick:h=>x(s),class:"btn-edit"},"✏️",8,U),e("button",{onClick:h=>w(s.id),class:"btn-delete"},"🗑️",8,q)])]))),128))])])]),e("div",G,[e("h3",null,d(u.value?"Modifier le produit":"Créer un produit"),1),e("form",{onSubmit:N(c,["prevent"])},[b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value.name=s),placeholder:"Nom du produit",required:""},null,512),[[g,i.value.name]]),b(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value.description=s),placeholder:"Description"},null,512),[[g,i.value.description]]),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.value.price=s),type:"number",step:"0.01",placeholder:"Prix",required:""},null,512),[[g,i.value.price,void 0,{number:!0}]]),e("input",{type:"file",multiple:"",onChange:t[3]||(t[3]=s=>i.value.pictures=Array.from(s.target.files||[]))},null,32),e("div",j,[e("button",O,d(u.value?"Mettre à jour":"Créer"),1),u.value?(a(),l("button",{key:0,type:"button",onClick:f},"Annuler")):S("",!0)])],32)])]))}}),$=v(z,[["__scopeId","data-v-da933de2"]]),H={};function J(_,r){return a(),l("div",null,r[0]||(r[0]=[e("h2",null,"Gestion des catégories",-1),e("p",null,"Liste des catégories et formulaires à venir...",-1)]))}const K=v(H,[["render",J]]),Q={};function R(_,r){return a(),l("div",null,r[0]||(r[0]=[e("h2",null,"Gestion des options",-1),e("p",null,"Liste des options et formulaires à venir...",-1)]))}const W=v(Q,[["render",R]]),X={class:"admin-wrapper"},Y={class:"admin-sidebar"},Z={class:"sidebar-nav"},ee={class:"admin-content"},te=P({__name:"AdminLayout",setup(_){const r=m("products"),i=E(()=>{switch(r.value){case"products":return $;case"categories":return K;case"options":return W;default:return $}});return(u,o)=>(a(),l("div",X,[e("aside",Y,[o[3]||(o[3]=e("div",{class:"sidebar-header"},[e("h2",null,"Admin")],-1)),e("nav",Z,[e("ul",null,[e("li",{class:y({active:r.value==="products"}),onClick:o[0]||(o[0]=c=>r.value="products")},"Produits",2),e("li",{class:y({active:r.value==="categories"}),onClick:o[1]||(o[1]=c=>r.value="categories")},"Catégories",2),e("li",{class:y({active:r.value==="options"}),onClick:o[2]||(o[2]=c=>r.value="options")},"Options",2)])])]),e("main",ee,[(a(),F(L(i.value)))])]))}}),re=v(te,[["__scopeId","data-v-957693b8"]]);export{re as default};
