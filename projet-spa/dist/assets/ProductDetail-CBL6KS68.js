import{d as j,u as I,a as R,r as c,o as x,b as z,A as _,w as A,c as i,e as s,f as v,F as h,g as f,t as u,h as D,v as E,i as L,j as r,k as N,_ as V}from"./index-qhu-GOTb.js";const B={key:0,class:"product-detail-page"},F={class:"product-detail-container"},T={class:"gallery-left"},U={class:"main-image"},M=["src","alt"],O={class:"thumbnails"},H=["src","alt","onClick"],q={class:"info-right"},w={class:"style-h1-product"},G={class:"price"},J={key:0},K=["value"],Q={class:"description"},W={key:1},X=j({__name:"ProductDetail",setup(Y){const y=z(),g=I(),b=R(),a=c(null),n=c(null),l=c(null),k=c([]);function C(e){return e.toLowerCase().trim().replace(/[0-9]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}x(async()=>{try{const e=y.params.id,t=await _.get(`/api/products/${e}`);a.value={id:Number(t.data.id),name:String(t.data.name),slug:C(String(t.data.name)),price:Number(t.data.price),picture:Array.isArray(t.data.picture)?t.data.picture:t.data.picture?[t.data.picture]:[],description:String(t.data.description),category:t.data.category,options:t.data.options??[]},n.value=a.value.picture[0]??null,l.value=null;const o=await _.get("/api/products");k.value=o.data.filter(d=>{var p;return d.id!==((p=a.value)==null?void 0:p.id)}).slice(0,4)}catch(e){console.error(e)}}),A(a,e=>{e&&N({title:`${e.name} | Revolve Realm`,meta:[{name:"description",content:`${e.name} — ${e.description.substring(0,140)}`},{property:"og:title",content:`${e.name} | Revolve Realm`},{property:"og:description",content:`${e.description.substring(0,140)}`},{property:"og:image",content:e.picture[0]??"/images/products/fallback.jpg"}],link:[{rel:"canonical",href:`https://revolverealm.com/products/${e.slug}`}]})});function $(){if(!g.isLogged||!a.value)return;if(!l.value){alert("Veuillez choisir une taille avant d’ajouter au panier !");return}const e=a.value.options.find(t=>t.id===l.value);e&&(b.addToCart({id:a.value.id,name:a.value.name,price:a.value.price,picture:a.value.picture[0]??null,optionId:e.id,size:e.size}),alert(`${a.value.name} (${e.size}) ajouté au panier !`))}function S(e){n.value=e}function m(e){const t=e.target;t.src="/images/products/fallback.jpg"}return(e,t)=>a.value?(r(),i("section",B,[s("div",F,[s("div",T,[s("div",U,[n.value?(r(),i("img",{key:0,src:n.value,alt:a.value.name,onError:m},null,40,M)):v("",!0)]),s("div",O,[(r(!0),i(h,null,f(a.value.picture,(o,d)=>(r(),i("img",{key:d,src:o,alt:a.value.name,class:"thumbnail",onClick:p=>S(o),onError:m},null,40,H))),128))])]),s("div",q,[s("h1",w,u(a.value.name),1),s("p",G,u(a.value.price.toFixed(2))+"€",1),a.value.options.length?(r(),i("div",J,[t[2]||(t[2]=s("label",{for:"option-select"},"Taille :",-1)),D(s("select",{id:"option-select","onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),class:"option-select"},[t[1]||(t[1]=s("option",{value:null,disabled:""},"Choisir une taille",-1)),(r(!0),i(h,null,f(a.value.options,o=>(r(),i("option",{key:o.id,value:o.id},u(o.size),9,K))),128))],512),[[E,l.value]])])):v("",!0),L(g).isLogged?(r(),i("button",{key:1,onClick:$,class:"add-to-cart-btn"}," Ajouter au panier ")):v("",!0),s("p",Q,u(a.value.description),1)])])])):(r(),i("section",W," Chargement du produit... "))}}),P=V(X,[["__scopeId","data-v-b348bbc1"]]);export{P as default};
